<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.prime.com.tr/ui">

<ui:composition template="/WEB-INF/templites/temp1.xhtml">



	<ui:define name="title">
        Справочник Locations
    </ui:define>

	<ui:define name="header_icon">
		<img src="#{request.contextPath}/images/icons/addbk_24.png"></img>
	</ui:define>

	<ui:define name="header">
        Справочник Locations
    </ui:define>

	<ui:define name="content">
		<style type="text/css">
.ui-breadcrumb ul li.first a { 
 	background-image: none; 
 	height: 20px !important; 
 	text-decoration: underline !important; 
 	text-indent: 0em; 
 	vertical-align: middle !important; 
 	width: 38px; 
	padding: 0; 
 	margin-top: 0px; 
 	overflow: hidden; 
} 


</style>

		<f:event listener="#{LocationComponent.parseRequestPars}" type="preRenderView" />

		<h:form id="form">
			Путь:
			<p:breadCrumb preview="true" 
				model="#{LocationComponent.getPathModel()}">
			</p:breadCrumb>

			<br></br>
			<br></br>
			<p:panel header="Корень справочника"
				rendered="#{LocationComponent.parentObjectNull}" style="width: 60%">
				Вы находитесь в корне древовидного справочника.
			</p:panel>

			<p:panel header="Элемент - #{LocationComponent.parentObject.title}" 
				rendered="#{!LocationComponent.parentObjectNull}"
				style="width: 60%">
				<h:panelGrid id="display1" columns="2" cellpadding="4">

					<h:outputText value="id:" />
					<h:outputText value="#{LocationComponent.parentObject.id}" />

					<h:outputText value="Название:" />
					<h:outputText value="#{LocationComponent.parentObject.title}" />

					<h:outputText value="Описание:" />
					<h:outputText value="#{LocationComponent.parentObject.description}" />

						
					
				</h:panelGrid>

				<hr></hr>
				<p:commandButton value="Ред." image="ui-icon edit" ajax="false"
					action="#{LocationComponent.editParent()}" />
				<p:commandButton value="Уд." image="ui-icon del" ajax="false"
					action="#{LocationComponent.deleteParent()}" />

			</p:panel>

			<br></br>

			<p:dataTable id="dta" value="#{LocationComponent.getChildren()}"
				selection="#{LocationComponent.selectedObject}" var="item" rows="15"
				paginator="true" paginatorPosition="bottom" selectionMode="single">

				<f:facet name="header">

					
					Дочерние элементы (<h:outputText
						value="#{LocationComponent.getChildrensCount()}" />)
				</f:facet>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Id" />
					</f:facet>
					<h:outputText value="#{item.id}" />
				</p:column>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Title" />
					</f:facet>
					<h:outputText value="#{item.title}" />
				</p:column>

				<p:column>
					<f:facet name="header">
						<h:outputText value="Description" />
					</f:facet>
					<h:outputText value="#{item.description}" />
				</p:column>

				<f:facet name="footer">
					<p:commandButton value="Просмотр" image="ui-icon ui-icon-search"
						update="form:display" oncomplete="iDialog.show()" />
					<p:commandButton value="Перейти" image="ui-icon ui-icon-search"
						ajax="false" action="#{LocationComponent.gotoSelectedObject()}" />


					<p:commandButton value="Доб." image="ui-icon add"   ajax="false"
                                     action="#{LocationComponent.create()}"/>  
                    <p:commandButton value="Ред." image="ui-icon edit"   ajax="false"
                                     action="#{LocationComponent.edit()}"/>
                    <p:commandButton value="Уд." image="ui-icon del"   ajax="false"
                                     action="#{LocationComponent.delete()}"/>	
				</f:facet>
			</p:dataTable>


			<p:dialog header="Location Detail" widgetVar="iDialog"
				resizable="false" width="200" showEffect="explode"
				hideEffect="explode">

				<h:panelGrid id="display" columns="2" cellpadding="4">

					<h:outputText value="id:" />
					<h:outputText value="#{LocationComponent.selectedObject.id}" />

					<h:outputText value="title:" />
					<h:outputText value="#{LocationComponent.selectedObject.title}" />

					<h:outputText value="description:" />
					<h:outputText
						value="#{LocationComponent.selectedObject.description}" />

				</h:panelGrid>
			</p:dialog>


		</h:form>

	</ui:define>

	<ui:define name="footer">
        footer
    </ui:define>
</ui:composition>
</html>